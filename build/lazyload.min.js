!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.lazyload=e()}(this,function(){"use strict";var n={throttle:function(n,e){var t=null,o=0;return function(){if(!t){var r=Date.now()-o,i=this,c=arguments,u=function(){o=Date.now(),t=!1,n.apply(i,c)};r>=e?u():t=setTimeout(u,e)}}},extend:function(n,e){return Object.assign({},n,e)},checkInView:function(n){var e=n.getBoundingClientRect();return e.top<window.innerHeight&&e.bottom>0&&e.left<window.innerWidth&&e.right>0}},e={},t=window;return e.install=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={defaultPic:"",errorPic:"",onSuccess:function(){},onError:function(){},onComplete:function(){}};r=n.extend(r,o);var i=[],c=n.checkInView,u={loading:"loading",loaded:"loaded",error:"error"},d=function(n){var e=n.el,o=(n.loaded,n.sourceSrc),i=new t.Image;l(e,u.loading),i.src=o,i.onload=function(){e.src=o,l(e,u.loaded),n.loaded=!0,r.onSuccess.call(null,e,n)},i.onerror=function(){l(e,u.error),n.loaded=!1,r.onError.call(null,e,n)}},l=function(n,e){n.setAttribute("lazy",e)},a=n.throttle(function(n){var e=!1;i.forEach(function(n){n.loaded||(e=c(n.el))&&d(n)})},200);!function(){t.addEventListener("scroll",a)}();e.directive("lazy",{bind:function(n){var t=r.defaultPic,o=n.getAttribute("src");n.src=t,i.push({loaded:!1,el:n,sourceSrc:o,defaultSrc:t}),e.nextTick(function(){a()})},update:function(n){}})},e});
